<?xml version="1.0" encoding="UTF-8"?>
<<<<<<< HEAD
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
=======
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
>>>>>>> 72c97bd (Feat: diary service, control 기능 완성)
                        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.routediary.repository.DiaryImageRepository">
  <select id="selectDiaryImages" parameterType="int" resultType="DiaryImage">
		SELECT *
		FROM diary_images
		WHERE diary_no = #{diaryNo}
  </select>
<<<<<<< HEAD

=======
  
>>>>>>> 72c97bd (Feat: diary service, control 기능 완성)
  <insert id="insert" parameterType="DiaryImage">
        INSERT INTO diary_images (diary_no, image_no, file_name, stored_file_path)
             VALUES (#{diaryNo}
                   , (SELECT NVL(MAX(image_no), 0) + 1
        	            FROM diary_images WHERE diary_no = #{diaryNo})
        	       , #{fileName}
        	       , #{storedFilePath})
  </insert>
<<<<<<< HEAD

  <delete id="delete" parameterType="int">
        DELETE FROM diary_images
=======
  
  <delete id="delete" parameterType="int">
        DELETE FROM diary_images 
>>>>>>> 72c97bd (Feat: diary service, control 기능 완성)
              WHERE diary_no = #{diaryNo} AND image_no = #{imageNo}
  </delete>

  <delete id="deleteAll" parameterType="int">
<<<<<<< HEAD
        DELETE FROM diary_images
              WHERE diary_no = #{diaryNo}
  </delete>
</mapper>
=======
        DELETE FROM diary_images 
              WHERE diary_no = #{diaryNo}    
  </delete>
</mapper>
>>>>>>> 72c97bd (Feat: diary service, control 기능 완성)
