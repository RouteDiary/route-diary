-- comments table
CREATE TABLE comments(
    diary_no NUMBER(6) NOT NULL, -- PK, FK
    comment_no NUMBER(8) NOT NULL, -- PK
    client_id VARCHAR2(20 CHAR) NOT NULL, 
    comment_content VARCHAR2(300 CHAR) NOT NULL,
    comment_writing_time DATE NOT NULL, 
    CONSTRAINT comments_pk PRIMARY KEY(diary_no, comment_no),
    CONSTRAINT comments_diaries_fk FOREIGN KEY(diary_no) REFERENCES diaries(diary_no),
    CONSTRAINT comments_clients_fk FOREIGN KEY(client_id) REFERENCES clients(client_id)
);

-- 시험용데이터(다이어리 번호, 댓글 번호, 아이디(이메일주소), 댓글 내용, 댓글작성시간)
INSERT INTO comments
     VALUES (1, 1, 'koreaman@gmail.com', '좋은 여행정보 감사합니다~' , SYSDATE);
INSERT INTO comments
     VALUES (1, 2, 'chinaman@gmail.com', '재밌게 보고갑니다', SYSDATE); 
INSERT INTO comments
     VALUES (1, 3, 'americaman@gmail.com', '좋아요 눌렀어요', SYSDATE); 
INSERT INTO comments
     VALUES (2, 1, 'koreawoman@gmail.com', '오 좋은글 감사합니다', SYSDATE);
INSERT INTO comments
     VALUES (2, 2, 'japanwoman@gmail.com', '와 자알 보다갑니다', SYSDATE);
INSERT INTO comments
     VALUES (3, 1, 'chinawoman@gmail.com', '굿', SYSDATE);
INSERT INTO comments
     VALUES (3, 2, 'chinawoman@gmail.com', '좋아요클릭', SYSDATE);
INSERT INTO comments
     VALUES (3, 3, 'americaman@daum.net', '베리굳', SYSDATE);
INSERT INTO comments
     VALUES (4, 1, 'koreaman@naver.com', '너무 유익해요', SYSDATE);
INSERT INTO comments
     VALUES (1, 1, 'japanwoman@naver.com', '재밌습니다', SYSDATE); -- PK 중복



-- hashtags table
CREATE TABLE hashtags(
    diary_no NUMBER NOT NULL, --PK
    hashtag VARCHAR2(20), --PK,FK
    CONSTRAINT hashtags_pk PRIMARY KEY(diary_no, hashtag),
    CONSTRAINT hashtags_diaries_fk FOREIGN KEY(diary_no) REFERENCES diaries(diary_no)
);

-- 시험용데이터(다이어리 번호, 해시태그)
INSERT INTO HASHTAGS
     VALUES (1, '여행');
INSERT INTO HASHTAGS
     VALUES (2, '양양');
INSERT INTO HASHTAGS
     VALUES (3, '속초');
INSERT INTO HASHTAGS
     VALUES (4, '통영');
INSERT INTO HASHTAGS
     VALUES (5, '거제도 바다');
INSERT INTO HASHTAGS
     VALUES (6, '남원');
INSERT INTO HASHTAGS
     VALUES (7, '광주');
INSERT INTO HASHTAGS
     VALUES (8, '부산');
INSERT INTO HASHTAGS
     VALUES (1, '문형리');
INSERT INTO HASHTAGS
     VALUES (2, '남이섬');
INSERT INTO HASHTAGS
     VALUES (3, '한라산_경치');
INSERT INTO HASHTAGS
     VALUES (4, '평창');
INSERT INTO HASHTAGS
     VALUES (5, '가평');
INSERT INTO HASHTAGS
     VALUES (6, '포항');
INSERT INTO HASHTAGS
     VALUES (7, '목포');




-- likes table
CREATE TABLE likes(
    diary_no NUMBER(6), -- FK, PK
    client_id VARCHAR2(20 CHAR), -- FK , PK
    CONSTRAINT likes_pk PRIMARY KEY(diary_no, client_id),
    CONSTRAINT likes_clients_fk FOREIGN KEY(client_id) REFERENCES clients(client_id),
    CONSTRAINT likes_diaries_fk FOREIGN KEY(diary_no) REFERENCES diaries(diary_no)
);

-- 시험용데이터(다이어리번호, 아이디)
INSERT INTO likes
     VALUES (1, 'koreaman@gmail.com');
INSERT INTO likes
     VALUES (2, 'japanwoman@naver.com');
INSERT INTO likes
     VALUES (3, 'chinaman@gmail.com');
INSERT INTO likes
     VALUES (4, 'americaman@gmail.com'); 
INSERT INTO likes
     VALUES (5, 'japanwoman@gmail.com');
INSERT INTO likes
     VALUES (6, 'chinawoman@gmail.com');
INSERT INTO likes
     VALUES (7, 'americaman@daum.net');
INSERT INTO likes
     VALUES (8, 'koreaman@naver.com');
INSERT INTO likes
     VALUES (8, 'koreawoman@naver.com');
INSERT INTO likes
     VALUES (1, 'japanwoman@naver.com');
INSERT INTO likes
     VALUES (1, 'koreaman@gmail.com'); -- PK LIKE_ID 중복


-- clients table
CREATE TABLE clients (
    client_id VARCHAR2(20 CHAR) NOT NULL,
    client_pwd VARCHAR2(20 CHAR) NOT NULL,
    client_cellphone_no VARCHAR2(15) NOT NULL,
    client_nickname VARCHAR2(10 CHAR) NOT NULL,
    client_status_flag NUMBER(1) NOT NULL,
    CONSTRAINT clients_pk PRIMARY KEY(client_id),
    CONSTRAINT clients_uk UNIQUE(client_nickname)
);

--
INSERT INTO clients 
     VALUES ('koreaman@gmail.com', 'asd11', '010-2392-2948', '한쿡', 1); -- 닉네임 중복 확인
INSERT INTO clients 
     VALUES clients ('japanman@gmail.com', 'asd12', '010-1112-2234', '한쿡', 0); 
INSERT INTO clients 
     VALUES ('chinaman@gmail.com', 'asd13', '010-1113-2234', '한국남자3', 1);
INSERT INTO clients 
     VALUES ('americaman@gmail.com', 'asd14', '010-1114-2234', '한국남자4', 1);
INSERT INTO clients 
     VALUES ('koreawoman@gmail.com', 'asd15', '010-1115-2234', '한국남자5', 0);
INSERT INTO clients 
     VALUES ('japanwoman@gmail.com', 'asd16', '010-1116-2234', '한국남자6', 1);
INSERT INTO clients 
     VALUES ('chinawoman@gmail.com', 'asd17', '010-1117-2234', '한국남자7', 0);
INSERT INTO clients 
     VALUES ('americawo@gmail.com', 'asd18', '010-1118-2234', '한국남자8', 0);
INSERT INTO clients 
     VALUES ('americawoman@naver.com', 'asd19', '010-1111-2234', '한국여자', 0); --전화번호 중복
INSERT INTO clients 
     VALUES ('americaman@daum.net', 'asd11', '010-1110-2234', '만쥬', 0); 
INSERT INTO clients 
     VALUES ('koreaman@naver.com', 'asd20', '010-1111-2234', '영지니', 1); 
INSERT INTO clients 
     VALUES ('koreawoman@naver.com', 'asd21', '010-1121-2235', '주뇽', 0); -- 아이디 중복
INSERT INTO clients 
     VALUES ('koreawoman@daum.net', 'asd22', '010-1121-2236', '미노', 1);
INSERT INTO clients 
     VALUES ('japanwoman@naver.com', 'asd23', '010-1121-2237', '민서기', 0); 
INSERT INTO clients 
     VALUES ('japanwoman@naver.com', 'asd23', '010-1121-2237', '민성스', 1); -- 아이디 중복 (에러 예상)
INSERT INTO clients 
     VALUES ('koreaman@naver.com', 'asd50', '010-1121-2280', '용호오', 1); 



--diaries table
CREATE TABLE diaries (
    diary_no NUMBER(6), -- PK
    client_id VARCHAR2(20 CHAR) NOT NULL, --FK
    diary_title VARCHAR2(30 CHAR) NOT NULL,  -- 한글로 30자 가능
    diary_writing_time DATE NOT NULL,
    diary_modifying_time DATE, 
    diary_start_date DATE NOT NULL,
    diary_end_date DATE NOT NULL,
    diary_disclosure_flag NUMBER(1) NOT NULL, -- 공개 = 1 / 비공개 = 0
    diary_view_cnt NUMBER(7) NOT NULL,
    diary_like_cnt NUMBER(5) NOT NULL,
    CONSTRAINT diaries_pk PRIMARY KEY(diary_no),
    CONSTRAINT diaries_clients_fk FOREIGN KEY(client_id) REFERENCES clients(client_id)
);

INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'koreaman@gmail.com', '즐거운 서울로 떠나요',
                            TO_DATE('20220722 102011','yyyy-mm-dd hh24:mi:ss'),TO_DATE('20220723 102011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20200710','yyyy-mm-dd'), TO_DATE('20200712','yyyy-mm-dd'),1, 1523,  0);

INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'japanwoman@gmail.com', '즐거운 부산으로 떠나요',
                            TO_DATE('20220623 102311','yyyy-mm-dd hh24:mi:ss'), null , TO_DATE('20200711','yyyy-mm-dd'), TO_DATE('20200714','yyyy-mm-dd'),
                            0, 1525,  1);

INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'americaman@gmail.com', '즐거운 광주으로 떠나요',
                            TO_DATE('20220908 102011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20220910 102011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20200801','yyyy-mm-dd'), TO_DATE('20200820','yyyy-mm-dd'),
                            1, 15231, 5); 

INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'koreawoman@gmail.com', '즐거운 인천으로 떠나요',
                            TO_DATE('20220626 102011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20220627 102011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20200101','yyyy-mm-dd'), TO_DATE('20200320','yyyy-mm-dd'),
                            0, 15231,  6);

INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'japanwoman@gmail.com', '즐거운 대전으로 떠나요',
                            TO_DATE('20220626 202011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20220628 202011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20200201','yyyy-mm-dd'), TO_DATE('20200220','yyyy-mm-dd'),
                            1, 15231, 0);

INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'chinawoman@gmail.com', '즐거운 울산으로 떠나요',
                            TO_DATE('20220627 222011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20220630 222011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20200301','yyyy-mm-dd'), TO_DATE('20200420','yyyy-mm-dd'),
                            1, 15231, 1);

INSERT INTO DIARIES VALUES(6, 'americaman@gmail.com', '즐거운 세종으로 떠나요',
                            TO_DATE('20220629 102011','yyyy-mm-dd hh24:mi:ss'), null, TO_DATE('20200401','yyyy-mm-dd'), TO_DATE('20200520','yyyy-mm-dd'),
                            0, 15231, 2);
INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'americaman@daum.net', '즐거운 경북으로 떠나요',
                            TO_DATE('20220629 152011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20220630 152011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20200404','yyyy-mm-dd'), TO_DATE('20200520','yyyy-mm-dd'),
                            1, 1522,  6);  

INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'koreaman@naver.com', '즐거운 전남으로 떠나요',
                            TO_DATE('20220629 132011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20220630 132011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20200404','yyyy-mm-dd'), TO_DATE('20200520','yyyy-mm-dd'),
                            0, 1231, 7); -- 여행기간이 같을 경우
                        
INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'koreaman@naver.com', '즐거운 전북으로 떠나요',
                            TO_DATE('20220629 132011','yyyy-mm-dd hh24:mi:ss'), , TO_DATE('20200404','yyyy-mm-dd'), TO_DATE('20200520','yyyy-mm-dd'),
                            0, 1231, 8); -- 뷰 수가 같을 경우
INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'man@naver.com', '즐거운 전북으로 떠나요',
                            TO_DATE('20220629 132011','yyyy-mm-dd hh24:mi:ss'), , TO_DATE('20200404','yyyy-mm-dd'), TO_DATE('20200520','yyyy-mm-dd'),
                            0, 1231, 9); -- id가 client 테이블에 없을 경우 (에러 예상)
INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'americawoman@gmail.com', '즐거운 경남으로 떠나요',
                            TO_DATE('20220629 112011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20220629 112011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20200402','yyyy-mm-dd'), TO_DATE('20200520','yyyy-mm-dd'),
                            1, 15251, 9,3); -- 아이디 중복 인 경우

INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'americawoman@naver.com', '즐거운 경남으로 떠나요',
                            TO_DATE('20220629 132011','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20220629 132015','yyyy-mm-dd hh24:mi:ss'), TO_DATE('20200403','yyyy-mm-dd'), TO_DATE('20200520','yyyy-mm-dd'),
                            0, 1521, 5); -- 제목 중복 인 경우
INSERT INTO DIARIES VALUES(DIARY_NO_SEQ.NEXTVAL, 'chinaman@gmail.com', '즐거운 대구로 떠나요',
                            TO_DATE('20220624 102411','yyyy-mm-dd hh24:mi:ss'), , TO_DATE('20200715','yyyy-mm-dd'), TO_DATE('20200719','yyyy-mm-dd'),
                            1, 15235,  4); -- 공개 여부 중복시

-- routes rable
CREATE TABLE routes(
    diary_no NUMBER NOT NULL, -- PK,FK
    route_no NUMBER NOT NULL, -- PK
    route_content VARCHAR2(500 CHAR) NOT NULL,
    kakao_map_id VARCHAR2(100 CHAR) NOT NULL,
    CONSTRAINT routes_pk PRIMARY KEY(diary_no, route_no),
    CONSTRAINT routes_diaries_fk FOREIGN KEY(diary_no) REFERENCES diaries(diary_no)
);

INSERT INTO ROUTES VALUES (1, 1, '경복궁갔다옴',1);
INSERT INTO ROUTES VALUES (1, 2, '어디갔다옴',2); 
INSERT INTO ROUTES VALUES (1, 3, '남산왕돈까스갔다옴',3); 
INSERT INTO ROUTES VALUES (1, 4, '남산왕돈까스2호점갔다옴',4); 
INSERT INTO ROUTES VALUES (1, 5, '남산왕돈까스2호점갔다옴',5);
INSERT INTO ROUTES VALUES (2, 1, '경복궁갔다옴',6); 
INSERT INTO ROUTES VALUES (2, 2, '남산갔다옴',7); 
INSERT INTO ROUTES VALUES (2, 3, '남산왕돈까스갔다옴',8); 
INSERT INTO ROUTES VALUES (2, 4, '여행지10갔다옴',9); 
INSERT INTO ROUTES VALUES (2, 6, '여행지11갔다옴',10); -- ROUTE_NO가 4에서 6으로 건너뛰는 경우
INSERT INTO ROUTES VALUES (10000, 1, 11, '여행지11갔다옴',11); -- 없는 다이어리에 루트를 추가하는 경우



-- admins table
CREATE TABLE admins(
    admin_id VARCHAR2(20 CHAR) NOT NULL, -- PK
    admin_pwd VARCHAR2(20 CHAR) NOT NULL,
    CONSTRAINT admins_pk PRIMARY KEY(admin_id)
);

INSERT INTO ADMINS VALUES ('1234', 'PW4321');
INSERT INTO ADMINS VALUES ('5678', 'PW8765');
INSERT INTO ADMINS VALUES ('9101', 'PW1019');
INSERT INTO ADMINS VALUES ('1121', 'PW1211');
INSERT INTO ADMINS VALUES ('3141', 'PW1413');



-- notices table
CREATE TABLE notices (
    notice_no NUMBER NOT NULL, -- PK
    admin_id VARCHAR2(20) NOT NULL,
    notice_title VARCHAR2(50) NOT NULL,
    notice_content VARCHAR2(255) NOT NULL,
    notice_writing_time DATE NOT NULL,
    notice_modifying_time DATE NOT NULL,
    notice_view_cnt NUMBER NOT NULL,
    CONSTRAINT notices_pk PRIMARY KEY(notice_no),
    CONSTRAINT notices_admin_id_fk FOREIGN KEY(admin_id) REFERENCES admins(admin_id)
);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'1234', '개인정보 처리방침 안내', '개인정보 처리방침이 변경되었습니다', TO_DATE('20220710 152011','yyyy-mm-dd hh24:mi:ss'), null, 3);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'1234', '여행작가 모집준비', '세시간전에서 여행작가를 모집합니다! 많은 지원바랍니다', TO_DATE('20220715 162011','yyyy-mm-dd hh24:mi:ss'), null, 5);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'5678', '감사이벤트', '1년이라는 시간동안 여러분께서 보여주신 관심과 애정에 조금이나마 보답하고자, 감사이벤트를 준비했습니다', TO_DATE('20220715 172011','yyyy-mm-dd hh24:mi:ss'), null, 8);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'5678', '첫 번째 여행자 컨퍼런스', ' 2022년 첫 여행자 컨퍼런스에 많은 관심과 애정을 주신 모든 분께 감사드립니다.많은 분께서 기다려주신 선정자가 발표되었습니다.', TO_DATE('20220717 182011','yyyy-mm-dd hh24:mi:ss'), null, 4);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'9101', '서포터즈 지원자 이벤트', '서포터즈 지원자 이벤트를 준비해보았습니다! 여행의 설레임을 마음껏 나누어주세요!', TO_DATE('20220819 192011','yyyy-mm-dd hh24:mi:ss'), null, 9);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'9101', '여행자 컨퍼런스 안내', '여행이 다시 설렐 수 있도록, <여행자 컨퍼런스>에서 만나요', TO_DATE('20220821 102011','yyyy-mm-dd hh24:mi:ss'), null, 2);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'1121', '로컬 서포터즈 모집', '그 지역에 대해 풍부한 정보를 전달해주시는 역할', TO_DATE('20220821 112014','yyyy-mm-dd hh24:mi:ss'), null, 3);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'1121', '한옥에서의 하룻밤 이벤트', '9월에 한옥에서 완벽한 하룻밤을 보낼 수 있는 기회', TO_DATE('20220823 122013','yyyy-mm-dd hh24:mi:ss'), null, 3);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'3141', '여행 굿즈 안내', '일상을 버티게 해주는 나의 인생 여행지를 소개해주세요. 다시 떠날 그 날을 위해 세시간전 여행 굿즈를 선물할게요. ', TO_DATE('20220823 153011','yyyy-mm-dd hh24:mi:ss'), null, 2);

INSERT INTO NOTICES VALUES (NOTICE_NO_SEQ.NEXTVAL,'3141', '혜화동 이벤트', '여러분의 일상에 쉼표를 선물할게요.', TO_DATE('20220825 152012','yyyy-mm-dd hh24:mi:ss'), null, 1);



CREATE SEQUENCE diary_no_seq;
CREATE SEQUENCE notice_no_seq;